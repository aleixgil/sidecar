<?php

namespace Revo\Sidecar\ExportFields;

use Revo\Sidecar\Filters\Filters;
use Revo\Sidecar\Filters\GroupBy;

class Id extends Number
{
    public static function make($field = 'id', $title = null, $dependsOnField = null)
    {
        return parent::make($field, $title, $dependsOnField)->onGroupingBy('count')->icon('bullseye');
    }

    public function getTitle(): string
    {
        if ((new Filters())->groupBy->isGrouping()){
            return __(config('sidecar.translationsPrefix').'count');
        }
        return parent::getTitle(); // TODO: Change the autogenerated stub
    }

    public function toHtml($row): string
    {
        if ((new Filters())->groupBy->isGrouping()){
            return $this->getValue($row) ?? "--";
        }
        return parent::toHtml($row);
    }

    public function isNumeric(): bool
    {
        return false;
    }
}